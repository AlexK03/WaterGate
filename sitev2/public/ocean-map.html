<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ocean Data Map</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    
    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background: #f0f8ff;
        }
        
        .map-container {
            width: 100%;
            height: 100vh;
            position: relative;
        }
        
        #map {
            width: 100%;
            height: 100%;
        }
        
        .map-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            min-width: 200px;
        }
        
        .control-group {
            margin-bottom: 15px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        
        .control-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .data-info {
            position: absolute;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 300px;
        }
        
        .data-info h3 {
            margin: 0 0 10px 0;
            color: #2c5aa0;
        }
        
        .data-item {
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .data-item strong {
            color: #2c5aa0;
        }
        
        .legend {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .legend h4 {
            margin: 0 0 10px 0;
            color: #2c5aa0;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="map-container">
        <div id="map"></div>
        
        <!-- Map Controls -->
        <div class="map-controls">
            <div class="control-group">
                <label for="dataType">Data Type:</label>
                <select id="dataType">
                    <option value="temperature">Water Temperature</option>
                    <option value="salinity">Salinity</option>
                    <option value="ph">pH Level</option>
                    <option value="oxygen">Dissolved Oxygen</option>
                    <option value="turbidity">Turbidity</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="timeRange">Time Range:</label>
                <select id="timeRange">
                    <option value="current">Current</option>
                    <option value="24h">Last 24 Hours</option>
                    <option value="7d">Last 7 Days</option>
                    <option value="30d">Last 30 Days</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="depth">Depth Level:</label>
                <select id="depth">
                    <option value="surface">Surface (0-10m)</option>
                    <option value="shallow">Shallow (10-50m)</option>
                    <option value="medium">Medium (50-200m)</option>
                    <option value="deep">Deep (200m+)</option>
                </select>
            </div>
        </div>
        
        <!-- Data Information Panel -->
        <div class="data-info">
            <h3>Selected Location</h3>
            <div class="data-item">
                <strong>Coordinates:</strong> <span id="coordinates">Click on map</span>
            </div>
            <div class="data-item">
                <strong>Temperature:</strong> <span id="temperature">--°C</span>
            </div>
            <div class="data-item">
                <strong>Salinity:</strong> <span id="salinity">-- PSU</span>
            </div>
            <div class="data-item">
                <strong>pH:</strong> <span id="ph">--</span>
            </div>
            <div class="data-item">
                <strong>Last Updated:</strong> <span id="lastUpdate">--</span>
            </div>
        </div>
        
        <!-- Legend -->
        <div class="legend">
            <h4>Data Legend</h4>
            <div class="legend-item">
                <div class="legend-color" style="background: #0066cc;"></div>
                <span>Excellent</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #00cc66;"></div>
                <span>Good</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ffcc00;"></div>
                <span>Moderate</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ff6600;"></div>
                <span>Poor</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #cc0000;"></div>
                <span>Critical</span>
            </div>
        </div>
    </div>

    <script>
        // Initialize the map
        const map = L.map('map').setView([0, 0], 2);
        
        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);
        
        // Add ocean tiles for better visualization
        L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer/tile/{z}/{y}/{x}', {
            attribution: '© Esri',
            opacity: 0.7
        }).addTo(map);
        
        // Sample ocean monitoring data
        const oceanData = [
            {
                lat: 25.7617, lng: -80.1918, // Miami
                temperature: 28.5,
                salinity: 35.2,
                ph: 8.1,
                oxygen: 6.8,
                turbidity: 2.1,
                status: 'excellent',
                lastUpdate: '2024-01-15 14:30'
            },
            {
                lat: 34.0522, lng: -118.2437, // Los Angeles
                temperature: 18.2,
                salinity: 33.8,
                ph: 7.9,
                oxygen: 7.2,
                turbidity: 1.8,
                status: 'good',
                lastUpdate: '2024-01-15 13:45'
            },
            {
                lat: 40.7128, lng: -74.0060, // New York
                temperature: 12.5,
                salinity: 32.1,
                ph: 7.8,
                oxygen: 6.5,
                turbidity: 3.2,
                status: 'moderate',
                lastUpdate: '2024-01-15 12:15'
            },
            {
                lat: 51.5074, lng: -0.1278, // London
                temperature: 8.9,
                salinity: 34.5,
                ph: 8.0,
                oxygen: 7.8,
                turbidity: 2.5,
                status: 'good',
                lastUpdate: '2024-01-15 11:30'
            },
            {
                lat: 35.6762, lng: 139.6503, // Tokyo
                temperature: 15.3,
                salinity: 33.9,
                ph: 7.7,
                oxygen: 6.2,
                turbidity: 4.1,
                status: 'poor',
                lastUpdate: '2024-01-15 10:45'
            },
            {
                lat: -33.8688, lng: 151.2093, // Sydney
                temperature: 22.1,
                salinity: 35.1,
                ph: 8.2,
                oxygen: 7.5,
                turbidity: 1.9,
                status: 'excellent',
                lastUpdate: '2024-01-15 09:20'
            }
        ];
        
        // Color mapping for different statuses
        const statusColors = {
            'excellent': '#0066cc',
            'good': '#00cc66',
            'moderate': '#ffcc00',
            'poor': '#ff6600',
            'critical': '#cc0000'
        };
        
        // Create markers for each data point
        const markers = [];
        oceanData.forEach(point => {
            const marker = L.circleMarker([point.lat, point.lng], {
                radius: 8,
                fillColor: statusColors[point.status],
                color: '#fff',
                weight: 2,
                opacity: 1,
                fillOpacity: 0.8
            }).addTo(map);
            
            // Add popup with data
            marker.bindPopup(`
                <div style="min-width: 200px;">
                    <h4 style="margin: 0 0 10px 0; color: #2c5aa0;">Ocean Monitoring Station</h4>
                    <p><strong>Temperature:</strong> ${point.temperature}°C</p>
                    <p><strong>Salinity:</strong> ${point.salinity} PSU</p>
                    <p><strong>pH:</strong> ${point.ph}</p>
                    <p><strong>Oxygen:</strong> ${point.oxygen} mg/L</p>
                    <p><strong>Turbidity:</strong> ${point.turbidity} NTU</p>
                    <p><strong>Status:</strong> <span style="color: ${statusColors[point.status]}">${point.status.toUpperCase()}</span></p>
                    <p><strong>Last Update:</strong> ${point.lastUpdate}</p>
                </div>
            `);
            
            // Add click event
            marker.on('click', function() {
                updateDataInfo(point);
            });
            
            markers.push(marker);
        });
        
        // Function to update data information panel
        function updateDataInfo(point) {
            document.getElementById('coordinates').textContent = `${point.lat.toFixed(4)}, ${point.lng.toFixed(4)}`;
            document.getElementById('temperature').textContent = `${point.temperature}°C`;
            document.getElementById('salinity').textContent = `${point.salinity} PSU`;
            document.getElementById('ph').textContent = point.ph;
            document.getElementById('lastUpdate').textContent = point.lastUpdate;
        }
        
        // Control event listeners
        document.getElementById('dataType').addEventListener('change', function() {
            const dataType = this.value;
            console.log('Data type changed to:', dataType);
            // Here you would update the map visualization based on the selected data type
        });
        
        document.getElementById('timeRange').addEventListener('change', function() {
            const timeRange = this.value;
            console.log('Time range changed to:', timeRange);
            // Here you would filter data based on time range
        });
        
        document.getElementById('depth').addEventListener('change', function() {
            const depth = this.value;
            console.log('Depth level changed to:', depth);
            // Here you would update markers based on depth level
        });
        
        // Add some interactive features
        map.on('click', function(e) {
            const lat = e.latlng.lat;
            const lng = e.latlng.lng;
            
            // Create a temporary marker
            const tempMarker = L.marker([lat, lng]).addTo(map);
            tempMarker.bindPopup(`
                <div>
                    <h4>New Location</h4>
                    <p><strong>Coordinates:</strong> ${lat.toFixed(4)}, ${lng.toFixed(4)}</p>
                    <p>Click to add monitoring data for this location.</p>
                </div>
            `).openPopup();
            
            // Remove marker after 5 seconds
            setTimeout(() => {
                map.removeLayer(tempMarker);
            }, 5000);
        });
        
        // Add real-time data simulation
        setInterval(() => {
            // Simulate data updates
            oceanData.forEach(point => {
                // Add small random variations to simulate real-time data
                point.temperature += (Math.random() - 0.5) * 0.1;
                point.salinity += (Math.random() - 0.5) * 0.05;
                point.ph += (Math.random() - 0.5) * 0.01;
                point.oxygen += (Math.random() - 0.5) * 0.1;
                point.turbidity += (Math.random() - 0.5) * 0.05;
                
                // Update last update time
                const now = new Date();
                point.lastUpdate = now.toISOString().slice(0, 19).replace('T', ' ');
            });
        }, 30000); // Update every 30 seconds
        
        console.log('Ocean Data Map initialized successfully!');
    </script>
</body>
</html>
